<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Post - Tech Trails</title>
    <!-- TinyMCE CDN -->
    <script
      src="https://cdn.tiny.cloud/1/<%= tinyMCEApiKey %>/tinymce/7/tinymce.min.js"
      referrerpolicy="origin"
    ></script>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <a href="/">Tech Trails</a>
      </div>
      <div class="post-controls">
        <button class="tab-btn" id="edit-tab">Edit</button>
        <button class="tab-btn" id="preview-tab">Preview</button>
        <button class="close-btn" id="close-btn">X</button>
      </div>
    </header>

    <!-- Create Post Container -->
    <main class="create-post-container">
      <form id="create-post-form" action="/create" method="POST">
        <!-- Cover Image Button -->
        <button type="button" class="add-cover-btn">+ Add Cover Image</button>

        <!-- Post Title Input -->
        <input
          type="text"
          name="title"
          class="post-title"
          placeholder="Post title..."
          required
        />

        <!-- TinyMCE Editor -->
        <textarea id="post-editor" name="content"></textarea>

        <!-- Hidden Input for Status -->
        <input type="hidden" name="status" id="post-status" value="draft" />

        <!-- Post Action Buttons -->
        <div class="post-actions">
          <button
            type="submit"
            class="publish-btn"
            onclick="setPostStatus('published')"
          >
            Publish
          </button>
          <button
            type="submit"
            class="save-draft-btn"
            onclick="setPostStatus('draft')"
          >
            Save Draft
          </button>
          <button type="reset" class="revert-btn">Revert New Changes</button>
        </div>
      </form>
    </main>

    <!-- TinyMCE Initialization -->
    <script>
      tinymce.init({
        selector: "#post-editor",
        plugins: "lists link image code textcolor",
        toolbar:
          "undo redo | bold italic | bullist numlist | link image | code",
      });

      function setPostStatus(status) {
        document.getElementById("post-status").value = status;
      }
    </script>
  </body>
</html>
